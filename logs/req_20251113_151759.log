2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | NEW DIAGRAM GENERATION REQUEST
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | Request ID: req_20251113_151759
2025-11-13 15:17:59 | INFO     | Problem Text Length: 42 characters
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Problem Text:
2025-11-13 15:17:59 | INFO     | --------------------------------------------------------------------------------
2025-11-13 15:17:59 | INFO     |   A simple circuit with battery and resistor
2025-11-13 15:17:59 | INFO     | --------------------------------------------------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Configuration:
2025-11-13 15:17:59 | INFO     |   canvas_width: 1200
2025-11-13 15:17:59 | INFO     |   canvas_height: 800
2025-11-13 15:17:59 | INFO     |   validation_mode: strict
2025-11-13 15:17:59 | INFO     |   active_features: ['Spatial Validation', 'Intelligent Label Placement', 'Property Graph', 'Stanza', 'Diagram Planner', 'Model Orchestrator', 'Ontology Validation', 'Z3 Optimization', 'Structural Validator', 'VLM Validator (BLIP-2)', 'Primitive Library (memory)', 'Request/Response Logging']
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 0: NLP Enrichment
2025-11-13 15:17:59 | INFO     | Description: Extract entities, relations, and scientific concepts
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Problem text (42 chars)
2025-11-13 15:17:59 | INFO     |   Type: str
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Output:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Extracted data using 1 NLP tools
2025-11-13 15:17:59 | INFO     |   stanza: dict
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase completed: SUCCESS
2025-11-13 15:17:59 | INFO     | Duration: 109.52ms
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 1: Property Graph Construction
2025-11-13 15:17:59 | INFO     | Description: Build knowledge graph from NLP results
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: NLP extraction results
2025-11-13 15:17:59 | INFO     |   stanza: dict
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Output:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Built graph with 7 nodes from 1 sources
2025-11-13 15:17:59 | INFO     |   request_id: req_1763027279882_1
2025-11-13 15:17:59 | INFO     |   summary: dict
2025-11-13 15:17:59 | INFO     |   node_types: dict
2025-11-13 15:17:59 | INFO     |   edge_types: dict
2025-11-13 15:17:59 | INFO     |   nodes: [7 items]
2025-11-13 15:17:59 | INFO     |   edges: [6 items]
2025-11-13 15:17:59 | INFO     |   disk_persistence: dict
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase completed: SUCCESS
2025-11-13 15:17:59 | INFO     | Duration: 1.98ms
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 2: Diagram Planning (Property Graph-Driven)
2025-11-13 15:17:59 | INFO     | Description: Create diagram plan from property graph
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Original request + Property graph
2025-11-13 15:17:59 | INFO     |   Type: str
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Output:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Planning mode: property_graph_driven
2025-11-13 15:17:59 | INFO     |   planning_mode: property_graph_driven
2025-11-13 15:17:59 | INFO     |   domain: current_electricity
2025-11-13 15:17:59 | INFO     |   entity_count: 3
2025-11-13 15:17:59 | INFO     |   relation_count: 2
2025-11-13 15:17:59 | INFO     |   constraint_count: 6
2025-11-13 15:17:59 | INFO     |   complexity_score: 0.205
2025-11-13 15:17:59 | INFO     |   z3_used: False
2025-11-13 15:17:59 | INFO     |   sympy_used: False
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase completed: SUCCESS
2025-11-13 15:17:59 | INFO     | Duration: 1.12ms
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 3: Scene Synthesis + Strategic Planning
2025-11-13 15:17:59 | INFO     | Description: Build scene graph and select strategy
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Problem specs with 3 objects
2025-11-13 15:17:59 | INFO     |   Type: CanonicalProblemSpec
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Output:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Scene with 7 objects
2025-11-13 15:17:59 | INFO     |   object_count: 7
2025-11-13 15:17:59 | INFO     |   selected_strategy: constraint_based
2025-11-13 15:17:59 | INFO     |   domain_modules: 0
2025-11-13 15:17:59 | INFO     |   diagram_plan: dict
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase completed: SUCCESS
2025-11-13 15:17:59 | INFO     | Duration: 1.05ms
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 3: Structural Consistency
2025-11-13 15:17:59 | INFO     | Description: Compare plan vs scene
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Diagram Plan
2025-11-13 15:17:59 | INFO     |   entities: 3
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Output:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Structural comparison report
2025-11-13 15:17:59 | INFO     |   missing_in_scene: [3 items]
2025-11-13 15:17:59 | INFO     |   extra_scene_objects: [7 items]
2025-11-13 15:17:59 | INFO     |   label_mismatches: [0 items]
2025-11-13 15:17:59 | INFO     |   relation_gaps: [2 items]
2025-11-13 15:17:59 | INFO     |   score: 0.0
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase completed: SUCCESS
2025-11-13 15:17:59 | INFO     | Duration: 0.48ms
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | PHASE 4: Ontology Validation
2025-11-13 15:17:59 | INFO     | Description: Validate semantic consistency
2025-11-13 15:17:59 | INFO     | ================================================================================
2025-11-13 15:17:59 | INFO     | 
2025-11-13 15:17:59 | INFO     | Phase Input:
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:17:59 | INFO     | Summary: Specs with 3 objects
2025-11-13 15:17:59 | INFO     |   Type: CanonicalProblemSpec
2025-11-13 15:17:59 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Phase Output:
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | Summary: Consistent: True
2025-11-13 15:18:00 | INFO     |   source: property_graph
2025-11-13 15:18:00 | INFO     |   input_stats: dict
2025-11-13 15:18:00 | INFO     |   consistent: True
2025-11-13 15:18:00 | INFO     |   errors: [0 items]
2025-11-13 15:18:00 | INFO     |   warnings: [41 items]
2025-11-13 15:18:00 | INFO     |   inferences: 0
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Phase completed: SUCCESS
2025-11-13 15:18:00 | INFO     | Duration: 27.51ms
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | PHASE 5: Physics Validation
2025-11-13 15:18:00 | INFO     | Description: Validate physics constraints and relationships
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Phase Input:
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | Summary: Scene with 7 objects
2025-11-13 15:18:00 | INFO     |   Type: Scene
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Phase Output:
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | Summary: Errors: 1, Warnings: 12
2025-11-13 15:18:00 | INFO     |   errors: 1
2025-11-13 15:18:00 | INFO     |   warnings: 12
2025-11-13 15:18:00 | INFO     | ----------------------------------------
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Phase completed: SUCCESS
2025-11-13 15:18:00 | INFO     | Duration: 0.68ms
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | ERROR    | 
2025-11-13 15:18:00 | ERROR    | ================================================================================
2025-11-13 15:18:00 | ERROR    | ERROR OCCURRED
2025-11-13 15:18:00 | ERROR    | ================================================================================
2025-11-13 15:18:00 | ERROR    | Context: {'domain': 'current_electricity', 'phase': 'generation'}
2025-11-13 15:18:00 | ERROR    | Error: Exception: Validation failed in strict mode: ['Circuit diagram missing power source']
2025-11-13 15:18:00 | ERROR    | 
2025-11-13 15:18:00 | ERROR    | Traceback:
2025-11-13 15:18:00 | ERROR    |   Traceback (most recent call last):
2025-11-13 15:18:00 | ERROR    |     File "/Users/Pramod/projects/STEM-AI/pipeline_universal_STEM/unified_diagram_pipeline.py", line 1655, in generate
2025-11-13 15:18:00 | ERROR    |       raise Exception(f"Validation failed in strict mode: {report.errors}")
2025-11-13 15:18:00 | ERROR    |   Exception: Validation failed in strict mode: ['Circuit diagram missing power source']
2025-11-13 15:18:00 | ERROR    |   
2025-11-13 15:18:00 | ERROR    | ================================================================================
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | RESPONSE
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | Status: FAILED
2025-11-13 15:18:00 | INFO     | Total Duration: 144.59ms
2025-11-13 15:18:00 | ERROR    | Error: Validation failed in strict mode: ['Circuit diagram missing power source']
2025-11-13 15:18:00 | INFO     | 
2025-11-13 15:18:00 | INFO     | Full trace saved to: logs/req_20251113_151759.log
2025-11-13 15:18:00 | INFO     | ================================================================================
2025-11-13 15:18:00 | INFO     | Trace JSON saved to: logs/req_20251113_151759_trace.json
