{
  "pipeline_version": "4.0-advanced",
  "stages": [
    {
      "name": "NLP Enrichment",
      "duration": 266.14907336235046,
      "output": {
        "tools_used": [
          "openie",
          "stanza",
          "scibert",
          "chemdataextractor",
          "mathbert",
          "amr"
        ]
      }
    },
    {
      "name": "Property Graph Construction",
      "duration": 0.003421306610107422,
      "output": {
        "request_id": "req_1763046489083_1",
        "summary": {
          "node_count": 8,
          "edge_count": 8,
          "connected_components": 1,
          "sources_used": [
            "OpenIE",
            "Stanza",
            "ChemDataExtractor",
            "MathBERT",
            "AMR"
          ]
        },
        "node_types": {
          "object": 7,
          "concept": 1
        },
        "edge_types": {
          "related_to": 8
        },
        "nodes": [
          {
            "id": "A",
            "type": "object",
            "label": "A",
            "properties": {},
            "metadata": {}
          },
          {
            "id": "battery and",
            "type": "object",
            "label": "battery and",
            "properties": {},
            "metadata": {}
          },
          {
            "id": "circuit",
            "type": "object",
            "label": "circuit",
            "properties": {
              "ner_type": "OBJECT"
            },
            "metadata": {
              "source": "stanza"
            }
          },
          {
            "id": "battery",
            "type": "object",
            "label": "battery",
            "properties": {
              "ner_type": "OBJECT"
            },
            "metadata": {
              "source": "stanza"
            }
          },
          {
            "id": "resistor",
            "type": "object",
            "label": "resistor",
            "properties": {
              "ner_type": "OBJECT"
            },
            "metadata": {
              "source": "stanza"
            }
          },
          {
            "id": "with",
            "type": "object",
            "label": "with",
            "properties": {},
            "metadata": {
              "source": "stanza_dep"
            }
          },
          {
            "id": "and",
            "type": "object",
            "label": "and",
            "properties": {},
            "metadata": {
              "source": "stanza_dep"
            }
          },
          {
            "id": "at",
            "type": "concept",
            "label": "at",
            "properties": {},
            "metadata": {
              "source": "amr"
            }
          }
        ],
        "edges": [
          {
            "source": "A",
            "target": "battery and",
            "type": "related_to",
            "label": "circuit on",
            "properties": {},
            "metadata": {
              "source": "openie"
            },
            "confidence": 1.0
          },
          {
            "source": "A",
            "target": "circuit",
            "type": "related_to",
            "label": "det",
            "properties": {},
            "metadata": {
              "source": "stanza_dep",
              "relation_type": "dependency"
            },
            "confidence": 1.0
          },
          {
            "source": "circuit",
            "target": "at",
            "type": "related_to",
            "label": "location",
            "properties": {},
            "metadata": {
              "source": "amr"
            },
            "confidence": 1.0
          },
          {
            "source": "battery",
            "target": "circuit",
            "type": "related_to",
            "label": "nmod",
            "properties": {},
            "metadata": {
              "source": "stanza_dep",
              "relation_type": "dependency"
            },
            "confidence": 1.0
          },
          {
            "source": "resistor",
            "target": "battery",
            "type": "related_to",
            "label": "conj",
            "properties": {},
            "metadata": {
              "source": "stanza_dep",
              "relation_type": "dependency"
            },
            "confidence": 1.0
          },
          {
            "source": "with",
            "target": "battery",
            "type": "related_to",
            "label": "case",
            "properties": {},
            "metadata": {
              "source": "stanza_dep",
              "relation_type": "dependency"
            },
            "confidence": 1.0
          },
          {
            "source": "and",
            "target": "resistor",
            "type": "related_to",
            "label": "cc",
            "properties": {},
            "metadata": {
              "source": "stanza_dep",
              "relation_type": "dependency"
            },
            "confidence": 1.0
          },
          {
            "source": "at",
            "target": "battery",
            "type": "related_to",
            "label": "ARG1",
            "properties": {},
            "metadata": {
              "source": "amr"
            },
            "confidence": 1.0
          }
        ],
        "disk_persistence": {
          "status": "success",
          "path": "output/property_graphs/req_1763046489083_1_property_graph.json"
        }
      }
    },
    {
      "name": "Diagram Planning",
      "duration": 0.322479248046875,
      "output": {
        "planning_mode": "property_graph_driven",
        "domain": "current_electricity",
        "entity_count": 4,
        "relation_count": 2,
        "constraint_count": 10,
        "complexity_score": 0.30000000000000004,
        "z3_used": false,
        "sympy_used": false
      }
    },
    {
      "name": "Scene Synthesis",
      "duration": 0.10668587684631348,
      "output": {
        "object_count": 7,
        "selected_strategy": "constraint_based",
        "domain_modules": 1,
        "diagram_plan": {
          "entities": 4,
          "relations": 2,
          "constraints": 10,
          "solver": "heuristic"
        }
      }
    },
    {
      "name": "Structural Consistency",
      "duration": 0.0007789134979248047,
      "output": {
        "missing_in_scene": [
          "battery and",
          "circuit",
          "battery",
          "resistor"
        ],
        "extra_scene_objects": [
          "plate_top",
          "plate_bottom",
          "field_line_0",
          "field_line_1",
          "field_line_2",
          "field_line_3",
          "field_line_4"
        ],
        "label_mismatches": [],
        "relation_gaps": [
          "Missing relation battery->circuit",
          "Missing relation resistor->battery"
        ],
        "score": 0.0
      }
    },
    {
      "name": "Ontology Validation",
      "duration": 0.04481816291809082,
      "output": {
        "source": "property_graph",
        "input_stats": {
          "nodes": 8,
          "edges": 8
        },
        "consistent": true,
        "errors": [],
        "warnings": [
          "Instance http://stem-diagrams.org/physics#Charge references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#NormalForce references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#Mass references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#Tension references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#Force references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/stem#Entity references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/stem#Process references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#hasMagnitude references undefined class http://www.w3.org/2002/07/owl#DatatypeProperty",
          "Instance http://stem-diagrams.org/physics#ElectrostaticForce references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#Friction references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#hasDirection references undefined class http://www.w3.org/2002/07/owl#DatatypeProperty",
          "Instance http://stem-diagrams.org/stem#Quantity references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/stem#relatedTo references undefined class http://www.w3.org/2002/07/owl#ObjectProperty",
          "Instance http://stem-diagrams.org/stem#Object references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/stem#hasProperty references undefined class http://www.w3.org/2002/07/owl#ObjectProperty",
          "Instance http://stem-diagrams.org/physics#actsOn references undefined class http://www.w3.org/2002/07/owl#ObjectProperty",
          "Instance http://stem-diagrams.org/physics#Energy references undefined class http://www.w3.org/2002/07/owl#Class",
          "Instance http://stem-diagrams.org/physics#GravitationalForce references undefined class http://www.w3.org/2002/07/owl#Class",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://www.w3.org/2000/01/rdf-schema#range",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://www.w3.org/2000/01/rdf-schema#domain",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasMetadata",
          "Use of undefined property http://stem-diagrams.org/stem#hasProperties",
          "Use of undefined property http://stem-diagrams.org/stem#hasLabel"
        ],
        "inferences": 0
      }
    },
    {
      "name": "Physics Validation",
      "duration": 0.0005478858947753906,
      "output": {
        "errors": 1,
        "warnings": 12
      }
    },
    {
      "name": "Domain Rule Validation",
      "duration": 0.00038313865661621094,
      "output": {
        "domain": "current_electricity",
        "checks": [
          {
            "name": "Kirchhoff Loop",
            "passed": false,
            "severity": "error",
            "details": "No power source detected in circuit graph"
          },
          {
            "name": "Power Source Presence",
            "passed": false,
            "severity": "error",
            "details": "No power source objects"
          }
        ],
        "errors": 2,
        "warnings": 0
      }
    },
    {
      "name": "Layout Optimization",
      "duration": 0.04137015342712402,
      "output": {
        "object_count": 7,
        "z3_used": false,
        "sympy_used": false,
        "pre_solver_positions": 0,
        "model_strategy": "constraint_solver",
        "model_orchestrator": {
          "model": "constraint_solver",
          "complexity": 0.30000000000000004
        }
      }
    },
    {
      "name": "Label Placement",
      "duration": 0.0007789134979248047,
      "output": {}
    },
    {
      "name": "Spatial Validation",
      "duration": 0.0009291172027587891,
      "output": {
        "errors": 0,
        "warnings": 5,
        "is_valid": true
      }
    },
    {
      "name": "Rendering",
      "duration": 0.0010669231414794922,
      "output": {
        "svg_size": 2762
      }
    }
  ],
  "active_features": [
    "Spatial Validation",
    "Intelligent Label Placement",
    "Property Graph",
    "OpenIE",
    "Stanza",
    "SciBERT",
    "ChemDataExtractor",
    "MathBERT",
    "AMR Parser",
    "Diagram Planner",
    "Model Orchestrator",
    "Primitive Library (memory)",
    "Domain Modules (5)",
    "Ontology Validation",
    "Z3 Optimization",
    "Structural Validator",
    "Request/Response Logging"
  ],
  "request_id": "req_1763046489083_1"
}